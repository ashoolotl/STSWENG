<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>User Profile</title>
    <link rel="stylesheet" href="user-profile-copy-modified.css">
    <link rel="stylesheet" href = "partials/navbar.css">
    <link rel="stylesheet" href = "edit-delete-modified.css">

</head>

<body>
    <script src="add-car.js"></script>
    <script src="view-token.js"></script>
    <script src="edit-delete-modified.js"></script>

    {{> _header }}

    <div id="overlay"></div>

    <header>
        <!--add photo here-->
    </header>

    <div class="profile-container">
        <div id="profile-picture">
        <img src="./images/filler-icon.jpg" alt="Profile Picture">
        </div>

        <h1>Hi, <span>Pedro</span></h1>
        <p>What would you like to get started on today?</p>
    </div>

    <div class="registered-cars">
        <h2>Registered Cars</h2>

        <!--car details currently static convert to changeable + change names of classes too-->
        <hr>
        <div class="car">
        <img src="./images/sedan.png">
        <div class="car-status">
            <div class="car-info">
            <p class="car-text">Status:</p>
            <p class="status">On-going</p>
            </div>
            <div class="car-info">
            <p class="car-text">Plate Number:</p>
            <p class="status">XXX 1234</p>
            </div>
            <div class="car-info">
            <p class="car-text">Contact Person:</p>
            <p class="status">Grogu - XX</p>
            </div>
            <div class="buttons-container">
            <button class="edit-btn" onclick="showEditPopup()">Edit</button>
            <button class="delete-btn" onclick="showDeletePopup()">Delete</button>
            </div>
        </div>

        
        </div>

        <hr>
        <div class="car">
        <img src="./images/sedan.png">
        <div class="car-status">
            <div class="car-info">
            <p class="car-text">Status:</p>
            <p class="status">Not Available</p>
            </div>
            <div class="car-info">
            <p class="car-text">Plate Number:</p>
            <p class="status">XXX 4567</p>
            </div>
            <div class="car-info">
            <p class="car-text">Contact Person:</p>
            <p class="status">Not Available</p>
            </div>
            <div class="buttons-container">
            <button class="edit-btn" onclick="showEditPopup()">Edit</button>
            <button class="delete-btn" onclick="showDeletePopup()">Delete</button>
            </div>
        </div>
        </div>

        <hr>
        <button id="add">
        <img id="addPhoto" src="./images/add.png">
        </button> <!--pop up should appear here in order to register new cars-->

        <!-- popup here -->
        <div id="addCarPopup" class="popupContainer">
        <div class="popupContent">
            <span id="closePopup" class="closePopup">&times;</span>
            <h1>Add a Car</h1>
            <form id="addCarForm">

            <label for="classType">Classification</label><br>
            <select id="classType" name="classType" required>
                <option value="">Select Class Type</option>
                <option value="motorcycle">Motorcycle</option>
                <option value="sedan">Sedan</option>
                <option value="hatchback">Hatchback</option>
                <option value="suv">SUV</option>
                <option value="pickup">Pickup</option>
                <option value="van">Van</option>
            </select><br>

            <label for="carBrand">Brand</label>
            <input type="text" id="carBrand" name="carBrand" required><br>

            <label for="carMake">Make</label>
            <input type="text" id="carMake" name="carMake" required><br>

            <label for="carModel">Model</label>
            <input type="text" id="carModel" name="carModel" required><br>

            <label for="carYear">Year</label>
            <input type="number" id="carYear" name="carYear" required><br>

            <label for="plateNumber">Plate Number (3 Digits, 2 Letters, 5 Digits)</label>
            <input type="text" id="plateNumber" name="plateNumber" pattern="\d{3}[A-Za-z]{2}\d{5}" required><br>

            <button type="submit">Submit</button>
            </form>
        </div>
        </div>

        <div id="successPopup" class="popupContainer">
        <div class="popupContent">
            <span id="closeSuccessPopup" class="closePopup">&times;</span>
            <h1>Completed</h1>
            <p>Your car has been added successfully.</p>
            <button type="submit" id="closeBtn">Done</button>
        </div>
        </div>

    </div>

    <!--subs-->
    <div id="active-subs" class="active-subscriptions">
        <h2>Active Subscriptions</h2>

        <div class="subscriptions">
        <img src="./images/service-1.png" onclick = "showToken()" >
        <img src="./images/service-2.png" onclick = "showToken()">
        </div>
    </div>

    <div id="subsPopup" class="tokenContainer">
        <span id="closePopup" class="closePopup" onclick = "closeToken()">&times;</span>
        <h1>Remaining Tokens for vehicle XXXX1234</h1>
        
        <hr>
        <div class="popupContent">
            <div class="contentWrapper Tokens">
                <div class = "image-select">  
                <input type="radio">
                <img class="tokenPopupImage" src="./images/service-1.png" alt="service1">
                </div>
                <span class="bookingPopupPlateNumber"><strong>Quantity: </strong>1</span>
            </div>
        </div>

        <hr>
        <div class="popupContent">
            <div class="contentWrapper Tokens">
            <div class = "image-select">  
                <input type="radio">
                <img class="tokenPopupImage" src="./images/service-2.png" alt="service2">
            </div>
            <span class="bookingPopupPlateNumber"><strong>Quantity: </strong>3</span>
        </div>
        </div>

        <hr>

        <button class="booking" onclick="showDateTimePopup()">Proceed to Booking</button>
    </div>

    <!--services-->
    <div id = "active-services" class="active-subscriptions">
        <h2>Active Services</h2>

        <div class="subscriptions">
        <img src="./images/service-1.png" onclick="showDateTimePopup()">
        <img src="./images/service-2.png" onclick="showDateTimePopup()">
        </div>
    </div>

    <!--date and time popup-->
    <div id="dateTimePopup" class="tokenContainer">
        <span class="closePopup" onclick="closeDateTimePopup()">&times;</span>
        <h2>Select Date and Time</h2>
        <!-- Content -->
        <div class = "content">
            <input type="date" id="bookingDate">
            <input type="time" id="bookingTime">
        </div>
        <hr>
        <button class = "dateTimeSubmit" onclick="submitDateTime()">Submit</button>
    </div>

    <!--edit-delete-->

    <!-- EDIT POPUP -->

    <div id="editPopup" class="popupContainer" style="display: none;">
        <span class="closePopup" onclick="closeEditPopup()">&times;</span>
        <h2>Edit <span class="subscription-name-label">Vehicle</span>'s Details</h2>

        <!-- REPLACE PLACEHOLDERS WITH VALUES FETCHED FROM DATABASE -->
        <form class="edit-form">
            <label for="plateNumber">Plate Number</label>
            <input type="text" id="plateNumber" name="plateNumber" placeholder="Plate Number" required>

            <label for="contactNumber">Contact Number</label>
            <input type="text" id="contactNumber" name="contactNumber" placeholder="Contact Number" required>

            <label for="details">Details</label>
            <textarea id="details" name="details" placeholder="Additional Information" required></textarea>
        </form>

        <div class="edit-buttons">
            <button class="confirm-edit-btn" onclick="showEditConfirmPopup()" disabled>Confirm</button>
            <button class="cancel-edit-btn" onclick="closeEditPopup()">Cancel</button>
        </div>
    </div>

    <!-- SUCCESSFUL EDIT POPUP -->
    <div id="successEditPopup" class="popupContainer" style="display: none;">
        <span class="closePopup" onclick="closeEditConfirmPopup()">&times;</span>
        <h2>Edit Successful</h2>
        <p>
            <!-- Lagay mo nalang sa loob nung span yung Vehicle name, for now nilagay ko muna si Vehicle  -->
            <span class="subscription-name-label">Vehicle</span> has been successfully edited.
        </p>
        <div class="delete-buttons">
            <button class="close-delete-btn" onclick="closeEditConfirmPopup()">Close</button>
        </div>
    </div>

    <!-- DELETE POPUP -->
    <div id="deletePopup" class="popupContainer" style="display: none;">
        <span class="closePopup" onclick="closeDeletePopup()">&times;</span>
        <h2>Delete Confirmation</h2>
        <p>
            Are you sure you want to delete this vehicle? This action cannot be undone.
        </p>
        <div class="delete-buttons">
            <button class="confirm-delete-btn" onclick="showDeleteConfirmPopup()">Confirm</button>
            <button class="cancel-delete-btn" onclick="closeDeletePopup()">Cancel</button>
        </div>
    </div>

    <!-- SUCCESSFUL DELETE POPUP -->
    <div id="successDeletePopup" class="popupContainer" style="display: none;">
        <span class="closePopup" onclick="closeDeleteConfirmPopup()">&times;</span>
        <h2>Delete Successful</h2>
        <p>
            <!-- Lagay mo nalang sa loob nung span yung Vehicle name, for now nilagay ko muna si Vehicle -->
            <span class="subscription-name-label">Vehicle</span> has been successfully deleted.
        </p>
        <div class="delete-buttons">
            <button class="close-delete-btn" onclick="closeDeleteConfirmPopup()">Close</button>
        </div>
    </div>

    {{> _footer}}

</body>

</html>