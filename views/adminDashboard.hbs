<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="icon" type="image/png" href="../images/logo-red.png" />

    <title>AutoworxPro | Admin Dashboard</title>
    <link rel="stylesheet" href="user-profile-admin-booking.css" />
    <link rel="stylesheet" href="update-status.css" />
    <link rel="stylesheet" href="partials/navbar.css" />
    <link rel="stylesheet" href="product-catalog.css" />
  </head>

  <body>

    {{> _header }}
    <div id="overlay"></div>

    <header>
      <!--add photo here-->
    </header>

    <div class="profile-container">
      <div id="profile-picture">
        <img src="./images/filler-icon.jpg" alt="Profile Picture" />
      </div>

      <h1>Hi, <span>{{user.firstName}}</span></h1>
      <p>What would you like to get started on today?</p>
    </div>

    <div class="registered-cars">
      <div class="header-separator">
        <h2>Service Bookings</h2>
        <div class="dropdown-container">
          <h2>Filter By Status: </h2>
        
          <select id="status-filter">
            <option value="All">All</option>
            <option value="Pending">Pending</option>
            <option value="In Progress">To Review</option>
            <option value="Complete">Complete</option>
          </select>
        </div>
          
      </div>
      <hr />
      <!-- Display service bookings -->
      {{#each allVehicles}}
        {{#if (eq this.status "Pending:")}}
          <div class="car" data-carDetails="{{this.classification}}-{{this.plateNumber}}" data-status="{{this.status}}">
            <img src="/images/vehicleClassification/{{this.classification}}.jpeg" alt="Image for {{this.classification}}.jpeg" />
            <div class="car-status">
              <div class="car-info">
                <p class="car-text">
                  <strong>Owner: </strong>
                  {{this.owner.firstName}} {{this.owner.lastName}}
                </p>
                <p class="car-text">
                  <strong>Plate Number: </strong>
                  {{this.plateNumber}}
                </p>
                <p class="car-text">
                  <strong>Status: </strong>
                  <span class="status current">{{this.status}} {{this.lastService}}</span>
                </p>
                <button class="update-status" data-vehicleplatenum="{{this.plateNumber}}">Mark Complete</button>
              </div>
            </div>
          </div>
        {{/if}}
      {{/each}}
      {{#each allVehicles}}
        {{#unless (eq this.status "Pending:")}}
          <div class="car" data-carDetails="{{this.classification}}-{{this.plateNumber}}" data-status="{{this.status}}">
            <img src="/images/vehicleClassification/{{this.classification}}.jpeg" alt="Image for {{this.classification}}.jpeg" />
            <div class="car-status">
              <div class="car-info">
                <p class="car-text">
                  <strong>Owner: </strong>
                  {{this.owner.lastName}} {{this.owner.firstName}}
                </p>
                <p class="car-text">
                  <strong>Plate Number: </strong>
                  {{this.plateNumber}}
                </p>
                <p class="car-text">
                  <strong>Status: </strong>
                  <span class="status current">{{this.status}}</span>
                </p>
              </div>
            </div>
          </div>
        {{/unless}}
      {{/each}}
    </div>

    <div class="ordered-products">
      <h2>Products Orders</h2>
      <hr />
      <div id="products" class="active-subscriptions">
        {{#each products}}
          <div class="dashboardProduct">
            <img src="/images/products/default-car-image.png" />
            <div class="order-details">
              <p><strong>Name:</strong> <span id="product-name">{{this.name}}</span></p>
              <p><strong>Quantity Sold:</strong> <span id="product-quantity">x{{this.totalQuantity}}</span></p>
              <p><strong>Total Sales:</strong> <span id="product-price">&euro; {{this.totalPrice}}</span></p>
            </div>
          </div>
        {{/each}}
      </div>
    </div>

    <!-- Popups and Forms -->
    <div id="showMoreInfoPopup" class="popupContainer">
      <div class="popupContent">
        <span class="closePopup" onclick="closeMoreInfoPopup()">&times;</span>
        <div class="info-item">
          <label for="wash-type">Wash Type: </label>
          <span id="wash-type">Hyper Wash</span>
        </div>
        <div class="info-item">
          <label for="first-name">Owner First Name: </label>
          <span id="first-name">John</span>
        </div>
        <div class="info-item">
          <label for="last-name">Owner Last Name: </label>
          <span id="last-name">Doe</span>
        </div>
        <div class="info-item">
          <label for="user-email">Owner Email: </label>
          <span id="user-email">Doe@gmail.com</span>
        </div>
        <div class="info-item">
          <label for="booking-reference-number">Payment Reference Number: </label>
          <span id="booking-reference-number">pi_12312352</span>
        </div>
      </div>
    </div>

    <!-- Error Popup -->
    <div id="errorPopup" class="miniPopupContainer" style="display: none;">
      <div class="popupContent">
        <span id="closePopupError" class="closePopup">&times;</span>
        <h3 style="color: azure;">There seems to be a problem</h3>
        <p id="errorText" style="color: azure;"></p>
      </div>
    </div>

    <!-- Success Popup -->
    <div id="successPopup" class="miniPopupContainer" style="display: none;">
      <div class="popupContent">
        <span id="closePopupSuccess" class="closePopup">&times;</span>
        <h3 style="color: azure;">Success</h3>
        <p id="successText" style="color: azure;"></p>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="/js/adminDashboard.js"></script>
    <script src="/js/logout.js"></script>
  </body>
</html>