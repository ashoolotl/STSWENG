<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Featured Services</title>
    <link rel="stylesheet" href="/partials/navbar.css">
    <link rel="stylesheet" href="/featured.css">
    <link rel="stylesheet" href="/book-appointment.css">
    <link rel="stylesheet" href="/cart.css">
    <link rel="stylesheet" href="/product-catalog.css">
  </head>

  <body>
    {{> header}}

    <div id="overlay"></div>

    <header>Product Catalog</header>
    
    <div class="product-container">

      <input type="text" id="searchInput" placeholder="Search products...">

      <div class="products">
        
        {{#each products}}
        <div class="product">
          <img src="/images/services/{{this.photo}}" alt="{{this.name}}">
          <div class="product-details">
            <h3>{{this.name}}</h3>
            <p>{{this.desc}}</p>
            <p style="margin-top: 8px;">Price &euro;<span id="product-price">{{this.price}}</span></p>
            <p>Availability:<span id="product-availability"> 20</span>{{this.availability}}</p>
            <div class="product-counter">
              <button class="counter-button" id="decrement">-</button>
              <span id="quantity">1</span>
              <button class="counter-button" id="increment">+</button>
            </div>

            {{#if ../user}}
              {{#if (eq ../user.role 'admin')}}
              <button id="productEdit" class="edit-btn" type="button">Edit Product</button>
              {{else}}
              <button id="productAddToCart" class="add-to-cart-btn" type="button">Add to Cart</button>
              {{/if}}
            {{/if}}

          </div>
        </div>
        {{/each}}
        
      </div>

      {{#if (eq ../user.role 'admin')}}
      <button id="addProduct" class="add-to-cart-btn" type="button">Add New Product</button>
      {{/if}}

    </div>

    <!-- EDIT PRODUCT POPUP -->
    <div id="editProductPopup" class="popupContainer" style="display: none;">
      <div class="popupContent">
        <span id="closeEditPopup" class="closePopup">&times;</span>
        <h1>Edit Product</h1>
          <form id="editProductForm">
            <label for="productName">Product Name</label>
            <input type="text" id="productName" name="productName" placeholder="">

            <label for="productDesc">Product Description</label>
            <input type="text" id="productDesc" name="productDesc" placeholder="">

            <label for="productPrice">Product Price</label>
            <input type="number" id="productPrice" name="productPrice" placeholder="">

            <label for="productAvailability">Product Availability</label>
            <input type="number" id="productAvailability" name="productAvailability" placeholder="">
          
            <button type="submit" id="editSubmit" class="submitBtn">Submit</button>
          </form>
      </div>
    </div>

    <!-- ADD PRODUCT POPUP -->
    <div id="addProductPopup" class="popupContainer" style="display: none;">
      <div class="popupContent">
        <span id="closeAddPopup" class="closePopup">&times;</span>
        <h1>Add New Product</h1>
          <form id="addProductForm">
            <label for="productName">Product Name</label>
            <input type="text" id="productName" name="productName" placeholder="">

            <label for="productDesc">Product Description</label>
            <input type="text" id="productDesc" name="productDesc" placeholder="">

            <label for="productPrice">Product Price</label>
            <input type="number" id="productPrice" name="productPrice" placeholder="">

            <label for="productAvailability">Product Availability</label>
            <input type="number" id="productAvailability" name="productAvailability" placeholder="">
          
            <button type="submit" id="addSubmit" class="submitBtn">Submit</button>
          </form>
      </div>
    </div>

    <script src="/js/product-catalog.js"></script>
  </div>

  </body>
</html>